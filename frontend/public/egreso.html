<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>MooneyMaker ‚Ä¢ Retiros</title>
  <!-- Build: 2026-01-02-23-03-19 -->
  <link rel="stylesheet" href="styles.css?v=2026010223"/>
</head>

<body>
  <div class="app-nosidebar">

    <!-- TOPBAR -->
<header class="topbar">
  <div class="topbar-inner">

    <!-- Marca -->
    <div class="topbar-left">
      <span class="brand">MooneyMaker</span>
    </div>

    <!-- Bot√≥n hamburguesa (solo mobile) -->
    <button class="hamburger" id="hamburgerBtn" aria-label="Abrir men√∫" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Navegaci√≥n desktop -->
    <nav class="topbar-center nav-desktop">
      <a href="egreso.html" class="nav-item active">Retiros</a>
      <a href="consulta-egresos.html" class="nav-item">Historial</a>
      <a href="usuarios.html" class="nav-item" data-admin-only="1">Usuarios</a>
      <a href="logs.html" class="nav-item" data-requires-encargado="1">Logs</a>
    </nav>

    <!-- Acciones desktop -->
    <div class="topbar-right nav-desktop">
      <span id="whoami" class="user-badge">‚Äî</span>
      <button id="logoutBtn" class="btn-logout">Salir</button>
    </div>
  </div>

  <!-- Men√∫ mobile (drawer) -->
  <div class="mobile-drawer" id="mobileDrawer" aria-hidden="true">
    <div class="mobile-drawer-head">
      <span class="brand">MooneyMaker</span>
      <button class="drawer-close" id="closeDrawerBtn" aria-label="Cerrar men√∫">‚úï</button>
    </div>

    <nav class="mobile-nav">
      <a href="egreso.html" class="mobile-item active">Retiros</a>
      <a href="consulta-egresos.html" class="mobile-item">Historial</a>
      <a href="usuarios.html" class="mobile-item" data-admin-only="1">Usuarios</a>
      <a href="logs.html" class="mobile-item" data-requires-encargado="1">Logs</a>
    </nav>

    <div class="mobile-actions">
      <div id="whoamiMobile" class="user-badge">‚Äî</div>
      <button id="logoutBtnMobile" class="btn-logout">Salir</button>
    </div>
  </div>

  <!-- overlay -->
  <div class="drawer-overlay" id="drawerOverlay"></div>
</header>



    <!-- CONTENT -->
    <main class="content-wrap">
      <div class="page">

        <!-- FORM CARD -->
        <section class="card">
          <div class="card-header">
            Registrar transferencia saliente
          </div>

          <div class="card-body">

            <form id="egresoForm" class="grid" enctype="multipart/form-data">

              <!-- =========================
                   SECCI√ìN 1: Concepto (PRIMERO)
                   ========================= -->
              <div class="section span12">
                <div class="section-head">
                  <div class="section-title">üìã Concepto de la Transferencia</div>
                  <div class="section-subtitle">Seleccion√° primero el motivo para ver los campos necesarios.</div>
                </div>

                <div class="section-body grid">
                  <div class="field span6">
                    <label>ETIQUETA (CONCEPTO) *</label>
                    <select id="etiqueta" required></select>
                    <div class="note">Eleg√≠ el motivo de la transferencia</div>
                  </div>

                  <div class="field span6 hidden" id="wrap_otro">
                    <label>OTRO (detalle) *</label>
                    <input id="otro_concepto">
                  </div>

                  <div class="field span6 hidden" id="wrap_usuario_casino">
                    <label>USUARIO DEL CASINO *</label>
                    <input id="usuario_casino">
                    <div class="note">Necesario para premios, duplicados o errores</div>
                  </div>
                </div>
              </div>

              <!-- =========================
                   SECCI√ìN 2: Datos B√°sicos
                   ========================= -->
              <div class="section span12">
                <div class="section-head">
                  <div class="section-title">üïí Fecha y Hora</div>
                  <div class="section-subtitle">Cu√°ndo se registra esta transferencia.</div>
                </div>

                <div class="section-body grid">
                  <div class="field span3">
                    <label>FECHA *</label>
                    <input id="fecha" type="date" required>
                    <div class="note">Fecha del registro</div>
                  </div>

                  <div class="field span3">
                    <label>HORA *</label>
                    <input id="hora" type="time" required>
                    <div class="note">Hora del registro</div>
                  </div>

                  <div class="field span3">
                    <label>TURNO *</label>
                    <select id="turno" required>
                      <option value="">Seleccionar turno</option>
                      <option value="Turno ma√±ana">Turno ma√±ana</option>
                      <option value="Turno tarde">Turno tarde</option>
                      <option value="Turno noche">Turno noche</option>
                    </select>
                    <div class="note" id="turno_sugerido"></div>
                  </div>

                  <!-- Campos condicionales para PREMIOS -->
                  <div class="field span3 hidden" id="wrap_hora_solicitud">
                    <label>HORA SOLICITUD CLIENTE</label>
                    <input id="hora_solicitud_cliente" type="text" placeholder="Ej: 14:32">
                    <div class="note">Peg√° la hora del banco (HH:MM)</div>
                  </div>

                  <div class="field span3 hidden" id="wrap_hora_quema">
                    <label>HORA QUEMA DE FICHAS</label>
                    <input id="hora_quema_fichas" type="time">
                    <div class="note">Hora de la quema</div>
                  </div>
                </div>
              </div>

              <!-- =========================
                   SECCI√ìN 3: Transacci√≥n
                   ========================= -->
              <div class="section span12">
                <div class="section-head">
                  <div class="section-title">üí∏ Datos de la Transferencia</div>
                  <div class="section-subtitle">Monto e identificaci√≥n.</div>
                </div>

                <div class="section-body grid">
                  <div class="field span4">
                    <label>MONEDA *</label>
                    <select id="moneda" required>
                      <option value="ARS" selected>üíµ Pesos (ARS)</option>
                      <option value="USD">üíµ D√≥lares (USD)</option>
                    </select>
                    <div class="note">Seleccion√° la moneda de la transferencia</div>
                  </div>

                  <div class="field span4">
                    <label>MONTO DE TRANSFERENCIA *</label>
                    <input id="monto" placeholder="Ej: 12000 o 12000,50" required>
                    <div class="note" id="montoNote">Formato: 12000 o 12000,50 (sin puntos)</div>
                  </div>

                  <div class="field span4">
                    <label>ID TRANSFERENCIA *</label>
                    <input
                      id="id_transferencia"
                      required
                      inputmode="text"
                      pattern="[a-zA-Z0-9\-_]+"
                      autocomplete="off"
                      placeholder="Ej: ABC123, TR-456"
                    >
                    <div class="note">Letras, n√∫meros, guiones y guiones bajos</div>
                  </div>
                </div>
              </div>

              <!-- =========================
                   SECCI√ìN 4: Cuentas
                   ========================= -->
              <div class="section span12">
                <div class="section-head">
                  <div class="section-title">üè¶ Cuentas</div>
                  <div class="section-subtitle">Origen y destino del dinero.</div>
                </div>

                <div class="section-body grid">
                  <div class="field span6">
                    <label>EMPRESA DE LA CUENTA DE SALIDA *</label>
                    <select id="empresa_salida" required></select>
                    <div class="note">Empresa de la cuenta de banco que estas usando</div>
                  </div>

                  <div class="field span6">
                    <label>NOMBRE DE CUENTA DE SALIDA *</label>
                    <input id="cuenta_salida" required>
                    <div class="note">Titular de la cuenta de banco que estas usando</div>
                  </div>

                  <div class="field span12">
                    <label>NOMBRE DE CUENTA RECEPTORA *</label>
                    <input id="cuenta_receptora" required>
                    <div class="note">Titular de la cuenta que va a recibir el dinero</div>
                  </div>
                </div>
              </div>

              <!-- =========================
                   SECCI√ìN 5: Comprobante & Notas
                   ========================= -->
              <div class="section span12">
                <div class="section-head">
                  <div class="section-title">üìé Comprobante & Notas</div>
                  <div class="section-subtitle">Adjunto obligatorio + observaciones.</div>
                </div>

                <div class="section-body grid">
                  <div class="field span6">
                    <label>SUBIR ARCHIVO COMPROBANTE *</label>
                    <input id="comprobante" type="file" accept=".jpg,.jpeg,.png,.pdf" required>
                    <div class="note" id="comprobante_nombre">Ning√∫n archivo seleccionado</div>
                    <div class="note">JPG / PNG / PDF ‚Ä¢ M√°x 10MB</div>
                  </div>

                  <div class="field span12">
                    <label>NOTAS</label>
                    <textarea id="notas"></textarea>
                  </div>
                </div>
              </div>

              <!-- ACTIONS (sticky) -->

                <div class="actions-right">
                  <button type="submit" class="btn btn-primary">Guardar</button>
                </div>

                <!-- Sticky guardar (solo mobile) -->

            </form>
          </div>
        </section>

      </div>
    </main>

    <!-- MODAL DE CONFIRMACI√ìN -->
    <div id="modalConfirmacion" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-backdrop" id="modalBackdrop"></div>
      <div class="modal-content">
        <div class="card-header" style="display:flex; justify-content:space-between; align-items:center;">
          <span id="modalTitle">‚ö†Ô∏è Confirmar Egreso</span>
          <button type="button" id="btnCerrarModal" style="background:none; border:none; color:var(--text); font-size:24px; cursor:pointer; padding:0; line-height:1;" aria-label="Cerrar modal">&times;</button>
        </div>
        <div class="card-body" id="confirmacionBody" style="max-height:70vh; overflow-y:auto;">
          <!-- Contenido din√°mico -->
        </div>
        <div style="padding:16px; border-top:1px solid var(--border); display:flex; gap:12px; justify-content:flex-end;">
          <button type="button" id="btnCancelarEgreso" class="btn btn-ghost">Cancelar</button>
          <button type="button" id="btnConfirmarEgreso" class="btn btn-primary">‚úì Confirmar y Guardar</button>
        </div>
      </div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast">
      <strong>‚Äî</strong>
      <span>‚Äî</span>
    </div>

  </div>

  <script src="app.js?v=2026010223"></script>
</body>
</html>
