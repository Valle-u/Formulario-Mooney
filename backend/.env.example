# ========================================
# SERVIDOR
# ========================================
PORT=4000
BASE_URL=http://localhost:4000
NODE_ENV=development

# ========================================
# SEGURIDAD - JWT
# ========================================
# CRÍTICO: Cambiar por un secreto único y fuerte (mínimo 32 caracteres)
# Generar con: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=super-secret-cambiar-minimo-32-caracteres-por-seguridad

# ========================================
# CORS - Control de Acceso Cross-Origin
# ========================================
# DESARROLLO: Configurar con el origen del frontend local
# PRODUCCIÓN: Lista de dominios autorizados separados por comas (SIN espacios)
# Ejemplo producción: https://app.seenode.com,https://www.midominio.com
# IMPORTANTE: NUNCA dejar vacío o usar "*" en producción - es un riesgo de seguridad
CORS_ORIGIN=http://localhost:5500

# Postgres
DATABASE_URL=postgres://user:password@localhost:5432/egresos_db

# Uploads
UPLOAD_DIR=uploads
MAX_UPLOAD_MB=10

# Cloudflare R2 (almacenamiento en la nube)
# Si estas variables NO están configuradas, los archivos se guardarán en UPLOAD_DIR (disco local)
# Para obtener las credenciales: https://dash.cloudflare.com/ > R2 > Manage R2 API Tokens
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET_NAME=
# URL pública del bucket (opcional, por defecto usa https://BUCKET_NAME.r2.dev)
R2_PUBLIC_URL=
# Modo legacy SSL (solo si hay problemas de SSL/TLS en el servidor)
# Valores: true = modo legacy compatible, false = modo estándar (default: false)
R2_LEGACY_SSL=false

# Performance & Cleanup (para alto volumen)
# Cantidad máxima de resultados por página (protege contra queries muy pesadas)
MAX_PAGE_SIZE=200

# Retención de archivos en meses (para limpieza automática)
FILE_RETENTION_MONTHS=12

# Retención de logs de auditoría en meses
AUDIT_RETENTION_MONTHS=6

# Pool de conexiones PostgreSQL (ajustar según recursos del servidor)
# Valores recomendados para 1000+ transacciones/día:
# - Servidor pequeño (2 CPU): PG_POOL_MIN=5, PG_POOL_MAX=20
# - Servidor medio (4 CPU): PG_POOL_MIN=10, PG_POOL_MAX=40
# - Servidor grande (8+ CPU): PG_POOL_MIN=20, PG_POOL_MAX=80
PG_POOL_MIN=10
PG_POOL_MAX=40

# Admin seed
SEED_ADMIN_USERNAME=admin
SEED_ADMIN_PASSWORD=admin123
SEED_ADMIN_FULLNAME=Administrador
